!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var u in n)("object"==typeof exports?exports:e)[u]=n[u]}}(window,function(){return function(e){var t={};function n(u){if(t[u])return t[u].exports;var r=t[u]={i:u,l:!1,exports:{}};return e[u].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,u){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:u})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var u=t[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}return function(t,n,u){return n&&e(t.prototype,n),u&&e(t,u),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.queue=[]}return u(e,[{key:"push",value:function(e){this.queue.push(e)}},{key:"getQueue",value:function(){return this.queue}},{key:"pop",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=[];e--;)t.push(this.queue.pop());return t}},{key:"del",value:function(e){this.queue=this.queue.filter(function(t){return t!==e})}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var u=t[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}return function(t,n,u){return n&&e(t.prototype,n),u&&e(t,u),t}}(),o=(u=n(0))&&u.__esModule?u:{default:u},i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.queueSet={}}return r(e,[{key:"get",value:function(e){return this.queueSet[e]||(this.queueSet[e]=new o.default),this.queueSet[e]}},{key:"pushTo",value:function(e,t){this.get(e).push(t)}},{key:"has",value:function(e){return!!this.queueSet[e]}},{key:"del",value:function(e,t){"*"===e?Object.keys(this.queueSet).forEach(function(e){e.del(t)}):this.queueSet[e].del(t)}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var u=t[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}return function(t,n,u){return n&&e(t.prototype,n),u&&e(t,u),t}}(),o=(u=n(1))&&u.__esModule?u:{default:u},i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handlerQueueSet=new o.default,this.messageQueueSet=new o.default}return r(e,[{key:"fireMessage",value:function(e){var t=this;return e&&e.type&&this.handlerQueueSet.get(e.type)&&(this.messageQueueSet.pushTo(e.type,e),this.handlerQueueSet.get(e.type).getQueue().forEach(function(n){t.handlerWrapper(n.handler,n.once,e)}),this.handlerQueueSet.get("*").getQueue().forEach(function(n){t.handlerWrapper(n.handler,n.once,e)})),this}},{key:"onMessage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.handlerQueueSet.pushTo(e,{handler:t,once:n.once}),!0===n.listenPreviousEvent&&this.messageQueueSet.has(e)&&this.handlerWrapper(t,n.once,this.messageQueueSet.get(e).getQueue()),this}},{key:"handlerWrapper",value:function(e,t){if(!e)return!1;for(var n=arguments.length,u=Array(n>2?n-2:0),r=2;r<n;r++)u[r-2]=arguments[r];return e.call.apply(e,[window].concat(u)),t&&this.handlerQueueSet.del("*",e),!0}}],[{key:"merge",value:function(){for(var t=new e,n=arguments.length,u=Array(n),r=0;r<n;r++)u[r]=arguments[r];return[].concat(u).forEach(function(e){e.onMessage("*",function(e){return t.fireMessage(e)})}),t}}]),e}();t.default=i}])});